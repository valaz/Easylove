#{extends 'admin.html' /}

#{set title:'Профиль' /}
<head>
    <script src="@{'/public/javascripts/bootstrap.file-input.js'}" type="text/javascript"
            charset="${_response_encoding}">
    </script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('.carousel').carousel();
            $('#carousel_profile div :first-child').addClass('active');
        });

    </script>
    <style>
        .carousel-control.bottom {
            right: auto;
            left: 43%;
            top: 85%;
        }
    </style>

</head>
<body>


*{<ul>}*
*{#{list items:user.pics, as:'picture'}}*
*{<img src="@{Admin.getPicture(picture.id)}" class="img-thumbnail" width="304" height="236"}*
*{style="max-height: 400px; max-width: 400px"/></li>}*
*{#{/list}}*
*{</ul>}*

<div class="container">
    <h1 class="row col-lg-offset-5  col-xs-offset-3">Профиль</h1>
    <hr>

    <div id="carousel_profile" class="carousel slide" data-ride="carousel">
        <div class="carousel-inner" role="listbox" >
        #{list items:user.pics, as:'picture'}
            <div class="item">
                <img src="@{Admin.getPicture(picture.id)}" style="width: 500%">

            <form id="deleteDay" action="@{Admin.deletePicture()}" method="POST">
                <input type="hidden" name="picID" id="picID" value="${picture.id}">
                <a class="bottom carousel-control" href="#carousel_profile" role="button">

                    <span class="glyphicon glyphicon glyphicon-remove" aria-hidden="true"
                          onclick="$('#deleteDay').submit();"></span>
                </a>
            </form>
            </div>
        #{/list}
        </div>
        <a class="left carousel-control" href="#carousel_profile" role="button" data-slide="prev">
            <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="right carousel-control" href="#carousel_profile" role="button" data-slide="next">
            <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>


    </div>


    <hr>

#{form @Admin.uploadPicture(), enctype:'multipart/form-data'}
*{<form id="image_upload" action="@{Admin.uploadPicture()}" method="post" enctype="multipart/form-data">}*
    <input id="fileInput" type="file" name="picture.image" style="display: none"/>
    <input id="fileSubmit" type="submit" name="submit" value="Save" style="display: none"/>

*{</form>}*
#{/form}
    <script>
        function imageUpload(fileInputId, fileSubmitId) {
            var imageInputForm = $('#' + fileInputId);
            imageInputForm.click();
            imageInputForm.change(function () {
                $('#' + fileSubmitId).click();
            });

        }
        ;
    </script>

</div>
<div class="row" >
    <button class="btn btn-success btn-lg col-md-2 col-md-offset-5 col-xs-offset-3"  onclick="imageUpload('fileInput','fileSubmit');"> <span
            class="glyphicon glyphicon-save" aria-hidden="true"></span> Добавить фото
    </button>
</div>


<div class="container">
    <div class="row">
        <div style="padding: 50px" class="col-md-offset-2">
            <div class="form-group">
                <div class="row">
                    <div class="col-md-5">
                        <div class="panel panel-default">
                            <div class="panel-heading">Логин</div>
                            <div class="panel-body">
                            ${user.nickname}
                            </div>
                        </div>
                    </div>
                    <div class="col-md-5">
                        <div class="panel panel-default">
                            <div class="panel-heading">Имя</div>
                            <div class="panel-body">
                            ${user.firstname}
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-5">
                        <div class="panel panel-default">
                            <div class="panel-heading">Телефон</div>
                            <div class="panel-body">
                            ${user.phone}
                            </div>
                        </div>
                    </div>
                    <div class="col-md-5">
                        <div class="panel panel-default">
                            <div class="panel-heading">Город</div>
                            <div class="panel-body">
                            ${user.city}
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-5">
                        <div class="panel panel-default">
                            <div class="panel-heading">Дата рождения</div>
                            <div class="panel-body">
                            ${user.getDate()}
                            </div>
                        </div>
                    </div>
                    <div class="col-md-5">
                        <div class="panel panel-default">
                            <div class="panel-heading">О себе</div>
                            <div class="panel-body">
                            ${user.selfinfo}!
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>


</body>